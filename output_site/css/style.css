/* Main styling */
:root {
  --primary-color: #6c5ce7;
  --secondary-color: #a29bfe;
  --background-color: #f8f9fa;
  --text-color: #2d3436;
  --card-background: #ffffff;
  --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  --max-width: 1400px;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background-color: var(--background-color);
  color: var(--text-color);
  line-height: 1.6;
}

header {
  background-color: var(--primary-color);
  color: white;
  padding: 1rem;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
}

.logo-container {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.logo {
  width: 40px;
  height: 40px;
}

header h1 {
  margin-bottom: 0;
}

.controls {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 0.5rem 0;
  gap: 1rem;
  flex-wrap: wrap;
}

.controls label { /* Kept if other labels are used, not for removed select */
  margin-right: 0.5rem;
}

.controls input[type="search"] {
  padding: 0.25rem 0.5rem;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 0.9rem; /* Adjusted to match button */
  background-color: white;
  min-width: 200px; /* Give it some base width */
}


.action-button {
  background-color: var(--primary-color); /* Reapply for specificity or keep existing */
  color: white;
  border: none;
  border-radius: 4px;
  padding: 0.25rem 0.75rem; /* Standardized padding */
  font-size: 0.9rem;
  cursor: pointer;
  transition: background-color 0.3s;
}


.action-button:hover {
  background-color: var(--secondary-color);
}

.template-info {
  max-width: var(--max-width);
  margin: 1rem auto;
  padding: 1rem;
  background-color: var(--card-background);
  border-radius: 8px;
  box-shadow: var(--card-shadow);
}

.template-info h2 {
  margin-bottom: 0.5rem;
  color: var(--primary-color);
}

.template-info pre {
  padding: 0.5rem;
  background-color: #f5f5f5;
  border-radius: 4px;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Gallery Grid */
.image-grid {
  display: grid;
  /* grid-template-columns: repeat(3, 1fr); */ /* FROM: Old fixed column count */
  /* TO: Fit as many items as possible, each with a minimum width of 250px, allowing them to grow. */
  /* Adjust 250px to control how many items fit. 250px should give ~5 items on a 1400px wide container with 1.5rem gaps. */
  /* (1400px (max-width) - 4*24px (gaps)) / 5 items = ~260px per item. */
  /* (1200px screen - 3*24px (gaps)) / 4 items = ~282px per item. */
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
  gap: 1.5rem;
  padding: 1.5rem;
  max-width: var(--max-width);
  margin: 0 auto;
}

.image-card {
  background-color: var(--card-background);
  border-radius: 8px;
  overflow: hidden;
  box-shadow: var(--card-shadow);
  transition: transform 0.3s ease;
  position: relative;
  display: flex; /* Added to help manage internal layout if needed */
  flex-direction: column; /* Added for consistency */
}

.image-card:hover {
  transform: translateY(-5px);
}

.image-container {
  position: relative;
  /* flex-grow: 1; /* Optional: if you want image container to take available space */
  /* display: flex; /* Optional: for aligning image if it's smaller than container */
  /* align-items: center; /* Optional */
  /* justify-content: center; /* Optional */
}

.image-card img {
  /* width: 100%; */   /* FROM: This would override the JS inline style */
  max-width: 100%;   /* TO: Ensure image doesn't overflow card if its % scale is too large for the card */
  height: auto;      /* Maintain aspect ratio */
  /* object-fit: cover; /* REMOVED: Not strictly necessary with height:auto and % width; could cause confusion. */
                       /* The image will scale based on its original aspect ratio. */
  display: block;
  cursor: pointer;
  margin-left: auto;  /* Centers the image horizontally if its scaled width is less than the card's width */
  margin-right: auto; /* Centers the image horizontally */
}

.image-card-info {
  padding: 0.75rem;
}

.image-card-info h3 {
  font-size: 1.1rem;
  margin-bottom: 0.25rem;
  color: var(--primary-color);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
}

.image-card-info h3:hover {
  text-decoration: underline;
}

.image-card-info h3:hover::after {
  content: '';
  display: inline-block;
  width: 14px;
  height: 14px;
  margin-left: 5px;
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%236c5ce7"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>');
  background-size: cover;
}

/* Artist label */
.artist-label {
  font-size: 1rem;
  font-weight: 500;
  margin: 0.5rem 0.5rem 0.25rem 0.5rem;
  color: var(--primary-color);
  cursor: pointer;
}

.artist-label:hover {
  text-decoration: underline;
}

/* Container for clickable tags in lightbox */
.tags-container-modal {
  margin-top: 0.5rem;
  margin-bottom: 1rem;
  line-height: 1.8; /* Allow for slightly taller tags */
}

/* Individual clickable tag in lightbox */
.clickable-tag-modal {
  display: inline-block; /* Allows padding and keeps them in line */
  background-color: #e9ecef; /* Light grey background */
  color: #495057; /* Darker grey text */
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  margin-right: 0.3rem; /* Space between tags */
  margin-bottom: 0.3rem; /* Space if tags wrap */
  font-size: 0.85rem;
  cursor: pointer;
  transition: background-color 0.2s ease, color 0.2s ease;
  border: 1px solid #ced4da;
}

.clickable-tag-modal:hover {
  background-color: var(--secondary-color); /* Use theme color on hover */
  color: white;
  border-color: var(--primary-color);
}

/* Lightbox */
.lightbox {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.9);
  z-index: 1000;
  overflow-y: auto;
}

.lightbox.active {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.close {
  position: absolute;
  top: 15px;
  right: 25px;
  font-size: 35px;
  color: white;
  cursor: pointer;
}

.lightbox-content {
  max-width: 90%;
  max-height: 90%;
  margin: 2rem auto;
  display: flex;
  flex-direction: column;
  background-color: var(--card-background);
  border-radius: 8px;
  overflow: hidden;
}

.lightbox-content img {
  max-width: 100%;
  max-height: 80vh;
  object-fit: contain;
}

.lightbox-info {
  padding: 1.5rem;
}

.lightbox-info h3 {
  font-size: 1.5rem;
  margin-bottom: 0.75rem;
  color: var(--primary-color);
}

.prompt-container {
  margin-bottom: 1rem;
}

.prompt-container h4 {
  margin-bottom: 0.5rem;
}

.prompt-container pre {
  background-color: #f5f5f5;
  padding: 0.75rem;
  border-radius: 4px;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.seed-container {
  font-size: 0.9rem;
  color: #666;
}

.prompt-container, .seed-container, .model-container, .artist-container {
  margin-top: 0.5rem;
}

/* Lightbox artist clickable style */
.artist-container #lightbox-artist {
  cursor: pointer;
  text-decoration: underline;
  text-decoration-color: transparent; /* Hide underline by default */
  transition: text-decoration-color 0.2s;
}
.artist-container #lightbox-artist:hover {
  text-decoration-color: var(--primary-color); /* Show underline on hover */
}


/* Loading indicator */
.loading {
  text-align: center;
  padding: 1rem;
  margin: 1rem auto;
  font-size: 1.1rem;
  color: var(--primary-color);
  display: none;
}

/* Model Selector */
.model-selector {
  max-width: var(--max-width);
  margin: 1rem auto;
  padding: 1rem;
  background-color: var(--card-background);
  border-radius: 8px;
  box-shadow: var(--card-shadow);
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  justify-content: center;
}

.model-button {
  background-color: var(--secondary-color);
  color: white;
  border: none;
  border-radius: 4px;
  padding: 0.5rem 1rem;
  cursor: pointer;
  font-size: 1rem;
  transition: background-color 0.3s ease;
}

.model-button:hover {
  background-color: var(--primary-color);
}

.model-button.active {
  background-color: var(--primary-color);
  box-shadow: 0 0 0 2px white, 0 0 0 4px var(--primary-color);
}

/* Toast notification */
.copy-toast {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background-color: var(--primary-color);
  color: white;
  padding: 10px 20px;
  border-radius: 4px;
  opacity: 0;
  transition: opacity 0.3s ease, bottom 0.3s ease; /* Added bottom transition */
  z-index: 1001;
  pointer-events: none;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.copy-toast.visible {
  opacity: 1;
  bottom: 30px; /* Animate upwards slightly when visible */
}

/* Responsive adjustments */
@media (min-width: 768px) {
  .lightbox-content {
    flex-direction: row;
    max-width: 80%;
  }
  
  .lightbox-content img {
    max-width: 60%;
    max-height: 80vh;
  }
  
  .lightbox-info {
    flex: 1;
    overflow-y: auto;
  }
}

@media (max-width: 1200px) {
  .image-grid {
    /* grid-template-columns: repeat(2, 1fr); */ /* REMOVED: Let auto-fit handle intermediate sizes. */
                                               /* The auto-fit rule with minmax(250px, 1fr) will naturally adjust. */
                                               /* For example, on a ~1200px screen, it will likely show 4 columns. */
                                               /* On a ~992px screen, it will likely show 3 columns. */
  }
}

@media (max-width: 767px) { /* Mobile */
  .image-grid {
    grid-template-columns: 1fr; /* Keep 1 column for small mobile screens */
    padding: 1rem;
    gap: 1rem;
  }
  .controls {
    flex-direction: column; /* Stack controls vertically on small screens */
    gap: 0.5rem;
  }
  .controls input[type="search"] {
    width: 100%; /* Make search box full width on small screens */
    margin-right: 0; /* Remove margin if stacked */
  }
}

/* Site navigation */
.site-navigation {
  display: flex;
  justify-content: center;
  margin: 1rem 0;
}

.site-navigation nav ul {
  display: flex;
  list-style: none;
  background-color: var(--card-background);
  border-radius: 8px;
  box-shadow: var(--card-shadow);
  overflow: hidden;
}

.site-navigation nav ul li {
  padding: 0;
  margin: 0;
}

.site-navigation nav ul li a {
  display: block;
  padding: 0.8rem 2rem;
  color: var(--text-color);
  text-decoration: none;
  font-weight: 500;
  transition: all 0.3s ease;
}

.site-navigation nav ul li a:hover {
  background-color: var(--secondary-color);
  color: white;
}

.site-navigation nav ul li.active a {
  background-color: var(--primary-color);
  color: white;
}

/* Prompt preview */
.prompt-preview {
  margin-top: 0.5rem;
  padding: 0.5rem;
  font-size: 0.9rem;
  background-color: #f0f0f0;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s ease;
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
}

.prompt-preview:hover {
  background-color: #e0e0e0;
}

/* Copy button in lightbox */
.copy-button {
  display: block;
  margin-top: 0.5rem;
  padding: 0.5rem 1rem;
  background-color: var(--primary-color);
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.copy-button:hover {
  background-color: var(--secondary-color);
}

/* Related Images in Lightbox */
.related-images {
  margin-top: 2rem;
  padding-top: 1rem;
  border-top: 1px solid #eee;
}

.related-images h4 {
  margin-bottom: 1rem;
  font-size: 1.1rem;
  color: var(--primary-color);
}

.related-images-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0.5rem;
  margin-top: 0.5rem;
}

.related-image {
  width: 100%;
  height: auto;
  border-radius: 4px;
  cursor: pointer;
  transition: transform 0.2s ease;
}

.related-image:hover {
  transform: scale(1.05);
}

/* Favorite button in lightbox */
.favorite-container {
  margin: 1rem 0;
}

.favorite-button {
  display: flex;
  align-items: center;
  background-color: #f5f5f5;
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 0.5rem 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.favorite-button:hover {
  background-color: #e0e0e0;
}

/* Favorite icon */
.favorite-icon {
  position: absolute;
  top: 10px;
  right: 10px;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(255, 255, 255, 0.8);
  border-radius: 50%;
  cursor: pointer;
  z-index: 10;
  transition: all 0.3s ease;
}

.favorite-icon::before {
  content: "♥";
  font-size: 20px;
  color: #ddd;
  transition: color 0.3s ease;
}

.favorite-icon:hover::before {
  color: #ff6b81;
}

.favorite-icon.favorited::before {
  color: #ff6b81;
}

/* Favorited image styles */
.image-card.favorited .favorite-icon::before {
  color: #ff6b81;
}

/* Artist-model info in character gallery */
.artist-model-info {
  font-size: 0.85rem;
  color: #666;
  margin-bottom: 0.5rem;
}

/* Model label in artist gallery */
.model-label {
  font-size: 0.8rem;
  color: #777;
  margin: 0rem 0.5rem 0.5rem 0.5rem;
}

/* Related images in lightbox - adjust to show same artist/model images */
.related-image.favorited {
  border: 2px solid var(--primary-color);
}
